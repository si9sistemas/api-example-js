import{imonovLeads}from"./core-leads.min.js";imonovLeads.staticTokenImonov="",imonovLeads.staticNameCookie="deumnomeunicoeexclusivoparacadacoockie",imonovLeads.staticUserSi9="",imonovLeads.staticPassSi9="",window.actionEnviarContato=enviarContatoFn,window.setFeedbackImmobile=setFeedbackImmobileFn,window.fakeDados=fakeDadosFn,window.closeMsgSuccessImoLead=closeMensageSuccess;let idInteressadoByCookie=imonovLeads.getCookie(imonovLeads.staticNameCookie);async function handleErrors(e){if(401===e.status&&(window.sessionStorage.removeItem("tokenLeadsImonov"),await imonovLeads.generateToken(),idInteressadoByCookie?await getInteressado(idInteressadoByCookie):enviarContatoFn()),!e.ok)throw Error(e.statusText);return e.json()}function fakeDadosFn(){setInteressadoFn({name:"VinÃ­cius Magnabosco",classification:"high",interestedIn:"buy",source:"46999838737",cellNumber:"46999838737",phoneNumber:"46999838737",email:"vh.magna@gmail.com",observation:"Teste Teste Teste Teste Teste Teste"})}async function enviarContatoFn(){let e={id:document.getElementById("idLeadSi9").value,name:document.getElementById("nameLeadSi9").value,classification:document.getElementById("classificationLeadSi9").value,interestedIn:document.getElementById("interestedInLeadSi9").value,source:document.getElementById("sourceLeadSi9").value,cellNumber:document.getElementById("cellNumberLeadSi9").value,phoneNumber:document.getElementById("phoneNumberLeadSi9").value,email:document.getElementById("emailLeadSi9").value,observation:document.getElementById("observationLeadSi9").value};await imonovLeads.enviarContato(e)}async function getInteressado(e){let t=await imonovLeads.generateToken(),n=t.result.token_type.toString()+" "+t.result.access_token.toString(),o=new Headers;o.append("Authorization",n),fetch("https://api.si9sistemas.com.br/imobilsi9-api/lead/"+e,{method:"GET",headers:o}).then(handleErrors).then((async e=>{let t=await e;console.log("Retorno Interessado",t),setInteressadoFn(t)})).catch((e=>{console.log("catch => "+e)}))}function setInteressadoFn(e){document.getElementById("idLeadSi9").value=e.id?e.id:null,document.getElementById("nameLeadSi9").value=e.name?e.name:null}async function setFeedbackImmobileFn(){let e={name:document.getElementById("nameLeadSi9").value,classification:document.getElementById("classificationLeadSi9").value,interestedIn:document.getElementById("interestedInLeadSi9").value,source:null,cellNumber:document.getElementById("cellNumberLeadSi9").value,phoneNumber:document.getElementById("phoneNumberLeadSi9").value,email:document.getElementById("emailLeadSi9").value,observation:null,contacts:[{propertyId:document.getElementById("idImmobileProperty").value,observation:document.getElementById("immobilePropertyObs").value}]};await imonovLeads.enviarContato(e)}function closeMensageSuccess(){document.getElementById("imonov-lead-msg").innerHTML=""}idInteressadoByCookie&&(async()=>{await getInteressado(idInteressadoByCookie)})();